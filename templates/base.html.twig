<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
              integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
              crossorigin=""/>
        <!-- Make sure you put this AFTER Leaflet's CSS -->
        <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
                integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
                crossorigin=""></script>

        {{ encore_entry_link_tags('app') }}
        {{ encore_entry_script_tags('app') }}

        <script>
            jQuery(window).resize(function() {
                // 45 for bootstrap body margin
                jQuery('#map').width(window.innerWidth - 45);

                // top menu 120px
                jQuery('#map').height(window.innerHeight - 120);
            });

            jQuery(document).ready(function() {
                // osm map have onWindowResize listener, updating the map if needed
                // we chacged the div size, so we need to redraw the map
                window.dispatchEvent(new Event('resize'));
            });
        </script>

        {% block stylesheets %}{% endblock %}
    </head>
    <body>
        <nav class="container-fluid">
            <div class="row">
                <div class="col">
                    <a href="{{ path('home') }}">{{ 'Home'|trans }}</a>
                    <a href="{{ path('gps-new') }}">{{ 'Add track'|trans }}</a>
                </div>

                <div class="col">
                    {% if app.user %}
                        {{ app.user.username }}
                        <a href="{{ path('app_logout') }}">logout</a>
                    {% else %}
                        <a href="{{ path("hwi_oauth_connect") }}">{{ 'Log in'|trans }}</a>
                    {% endif %}
                </div>

                <div class="col">
                    <a href="{{ path('home', { _locale: 'en' }) }}">en</a>
                    <a href="{{ path('home', { _locale: 'bg' }) }}">bg</a>
                </div>
            </div>
            <hr>
            {% block content %}{% endblock %}
        </nav>
    {% block javascripts %}{% endblock %}
    </body>
</html>
